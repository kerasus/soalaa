<template>
  <div
    class="shadow-3"
    :class="{'time-card-opened':openMode, 'time-card-default': !openMode }"
  >
    <div
      v-if="!openMode"
      class="timer-default-wrapper"
      @click="timerOpen"
    >
      <svg
        class="timer"
        viewBox="0 0.373 28.632 33.403"
      >
        <path
          id="timer"
          d="M 19.08799934387207 0.3729999959468842 L 19.08799934387207 3.578999996185303 L 9.543999671936035 3.578999996185303 L 9.543999671936035 0.3729999959468842 L 19.08799934387207 0.3729999959468842 Z M 12.75 21.10099983215332 L 12.75 11.55700016021729 L 15.88199996948242 11.55700016021729 L 15.88199996948242 21.10099983215332 L 12.75 21.10099983215332 Z M 25.5 10.58800029754639 C 27.58799934387207 13.17266654968262 28.63199996948242 16.13033294677734 28.63199996948242 19.46100044250488 C 28.63199996948242 23.43766784667969 27.24033355712891 26.81766700744629 24.45700073242188 29.60100173950195 C 21.67366790771484 32.38433456420898 18.29366683959961 33.7760009765625 14.31700038909912 33.7760009765625 C 10.34033298492432 33.7760009765625 6.960332870483398 32.38433456420898 4.177000045776367 29.60100173950195 C 1.393667221069336 26.81766891479492 0.001333872554823756 23.45000076293945 0 19.49799919128418 C -0.001333872554823756 15.54599666595459 1.390332698822021 12.16599655151367 4.175000190734863 9.357998847961426 C 6.959667682647705 6.550000667572021 10.34000015258789 5.145668029785156 14.31599998474121 5.144999980926514 C 17.64666748046875 5.144999980926514 20.62899971008301 6.213666439056396 23.26300048828125 8.35099983215332 L 25.5 6.039999961853027 C 26.29533386230469 6.685999870300293 27.04100036621094 7.431666851043701 27.73699951171875 8.277000427246094 L 25.5 10.58800029754639 Z M 14.31599998474121 30.64500045776367 C 17.39799880981445 30.64500045776367 20.01999855041504 29.55133438110352 22.18199920654297 27.36400032043457 C 24.3439998626709 25.17666625976563 25.42499923706055 22.54233360290527 25.42499923706055 19.46100044250488 C 25.42499923706055 16.37966728210449 24.3439998626709 13.75766754150391 22.18199920654297 11.59500026702881 C 20.01999855041504 9.432332992553711 17.39799880981445 8.35099983215332 14.31599998474121 8.35099983215332 C 11.23400020599365 8.35099983215332 8.612000465393066 9.431999206542969 6.449999809265137 11.5939998626709 C 4.287999153137207 13.75600051879883 3.206665992736816 16.37833404541016 3.206000089645386 19.46100044250488 C 3.205334186553955 22.54366683959961 4.286334037780762 25.1783332824707 6.449000358581543 27.36499977111816 C 8.611665725708008 29.55166625976563 11.23399925231934 30.64499855041504 14.31599998474121 30.64500045776367 Z"
        />
      </svg>
    </div>
    <div class="row open-mode">
      <div class="col-2 timer-right">
        <svg
          v-if="show"
          class="timer-svg"
          viewBox="0 0.373 28.632 33.403"
        >
          <path
            id="timer"
            d="M 19.08799934387207 0.3729999959468842 L 19.08799934387207 3.578999996185303 L 9.543999671936035 3.578999996185303 L 9.543999671936035 0.3729999959468842 L 19.08799934387207 0.3729999959468842 Z M 12.75 21.10099983215332 L 12.75 11.55700016021729 L 15.88199996948242 11.55700016021729 L 15.88199996948242 21.10099983215332 L 12.75 21.10099983215332 Z M 25.5 10.58800029754639 C 27.58799934387207 13.17266654968262 28.63199996948242 16.13033294677734 28.63199996948242 19.46100044250488 C 28.63199996948242 23.43766784667969 27.24033355712891 26.81766700744629 24.45700073242188 29.60100173950195 C 21.67366790771484 32.38433456420898 18.29366683959961 33.7760009765625 14.31700038909912 33.7760009765625 C 10.34033298492432 33.7760009765625 6.960332870483398 32.38433456420898 4.177000045776367 29.60100173950195 C 1.393667221069336 26.81766891479492 0.001333872554823756 23.45000076293945 0 19.49799919128418 C -0.001333872554823756 15.54599666595459 1.390332698822021 12.16599655151367 4.175000190734863 9.357998847961426 C 6.959667682647705 6.550000667572021 10.34000015258789 5.145668029785156 14.31599998474121 5.144999980926514 C 17.64666748046875 5.144999980926514 20.62899971008301 6.213666439056396 23.26300048828125 8.35099983215332 L 25.5 6.039999961853027 C 26.29533386230469 6.685999870300293 27.04100036621094 7.431666851043701 27.73699951171875 8.277000427246094 L 25.5 10.58800029754639 Z M 14.31599998474121 30.64500045776367 C 17.39799880981445 30.64500045776367 20.01999855041504 29.55133438110352 22.18199920654297 27.36400032043457 C 24.3439998626709 25.17666625976563 25.42499923706055 22.54233360290527 25.42499923706055 19.46100044250488 C 25.42499923706055 16.37966728210449 24.3439998626709 13.75766754150391 22.18199920654297 11.59500026702881 C 20.01999855041504 9.432332992553711 17.39799880981445 8.35099983215332 14.31599998474121 8.35099983215332 C 11.23400020599365 8.35099983215332 8.612000465393066 9.431999206542969 6.449999809265137 11.5939998626709 C 4.287999153137207 13.75600051879883 3.206665992736816 16.37833404541016 3.206000089645386 19.46100044250488 C 3.205334186553955 22.54366683959961 4.286334037780762 25.1783332824707 6.449000358581543 27.36499977111816 C 8.611665725708008 29.55166625976563 11.23399925231934 30.64499855041504 14.31599998474121 30.64500045776367 Z"
          />
        </svg>
      </div>
      <div
        v-if="show"
        class="col-3 timer-text"
      >
        زمان گذشته:
        <span class="time-margin-top">
          {{ passedTime }}
        </span>
      </div>
      <div class="col-7 timer-text">
        <div v-if="show && remainingTime && currentCat">
          زمان تا پایان مهلت پاسخگویی
          {{ currentCat.title }}
          :
          <span class="time-margin-top">
            {{ remainingTime }}
          </span>
        </div>
      </div>
    </div>
    <q-btn
      v-if="show"
      class="close-icon"
      text-color="grey"
      icon="mdi-close"
      flat
      fab
      @click="timerClose"
    />
  </div>
</template>

<script>
export default {
  name: 'PcTimer',
  props: [
    'currentCat',
    'passedTime',
    'remainingTime'
  ],
  data: () => ({
    show: false,
    openMode: false
  }),
  methods: {
    timerOpen () {
      this.$emit('timerOpen', true)
      if (!this.show) {
        this.openMode = true
        setTimeout(() => {
          this.show = true
        }, 200)
      }
    },
    timerClose () {
      this.$emit('timerOpen', false)
      this.openMode = false
      this.show = false
    }
  }
}
</script>

<style lang="scss" scoped>
.time-card-default {
  height: 103px;
  width: 130px;
  border-radius: 20px 20px 0 0;
  transition: 0.5s;
  background-color: white;
  justify-self: end;
  margin-left: 0;
  float: right;

  &:hover {
    cursor: pointer;
  }

  .close-icon {
    width: 30px;
    height: 30px;
  }

  .timer-default-wrapper {
    height: 103px;
    width: 130px;

    .timer {
      width: 28.632px;
      height: 33.403px;
      margin-top: 38px;
      margin-left: 50px;
      transform: matrix(1, 0, 0, 1, 0, 0);
      fill: rgba(136, 136, 136, 1);
    }
  }
}

.time-card-opened {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 103px;
  width: 100%;
  background-color: white;
  border-radius: 20px 20px 0 0;
  transition: 0.5s;
  margin-left: 0;
  float: right;

  .open-mode {
    display: flex;
    justify-content: space-between;
    width: 100%;
    margin-left: 50px;

    .timer-right {
      .timer-svg {
        width: 28.632px;
        height: 33.403px;
        transform: matrix(1, 0, 0, 1, 0, 0);
        fill: rgba(255, 193, 7, 1);
      }
    }

    .timer-text {
      display: flex;
      flex-direction: row;
      align-items: center;
      font-size: 16px;

      &:last-child {
        justify-content: center;
      }

      @media only screen and (max-width: 1040px) {
        font-size: 12px;
      }

      .time-margin-top {
        margin-right: 10px
      }
    }
  }
}
</style>

<style lang="scss">
.q-btn {
  &.close-icon {
    margin-right: 50px;
    padding: 0;
    height: 30px !important;

    .q-icon {
      font-size: 40px;
    }
  }
}
</style>
